---
title: "GrossAff"
author: "Dvora"
date: "18 12 2019"
output: html_document
editor_options: 
  chunk_output_type: console
---


GrossAff - Gross affinity from GBIF data 

input â€“ overlay GetCoords + GetEnv
    rasters - 'RasterStack' file, with layers of temperature. The choosen layres writen in "names" raw.(e.g BO_sstmax, BO_sstmean )
    data frame with species names, lat, lon

output: summary statistics (mean, median, mode, quantiles, SD, range, etc.)
`coords` should be a dataframe of coordinates (lat and lon)




Load packages
```{r}
library(tidyverse)
library(sdmpredictors)

library(dismo)
library(jsonlite)

```

cerate example data, with coordinate for Boops boops.
the data coords has the coordinate, with "lat" and "lon" column
```{r}
sp_data = read.csv(file = "sp.data.CSV")
sp_data = sp_data %>% filter(species=="Boops boops")
coords = sp_data %>% select(lon,lat)

```


Load layers from Bio-Oracle (1) and extract values matching a dataframe of coordinates (2)
```{r}
list_of_layer_stats <- lapply(names(rasters),function(layer_name) {
temp <- raster::extract(rasters[[layer_name]], coords, df = TRUE) # extract according to 'coords' dataframe (lon-lat)
sumdata <- summarytools::descr(temp)
sumdata = as_tibble(t(sumdata))[1,]
})
names(list_of_layer_stats) <- names(rasters)
stat_dataframe <- bind_rows(list_of_layer_stats,.id = "id") %>% rename(layer = id)
```






summary of the temperature
summary statistics (mean, median, mode, quantiles, SD, range, etc.)

```{r}
library(summarytools)
```

